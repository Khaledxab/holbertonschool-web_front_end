<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8" />
    <title>Task 6</title>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
</head>

<body>
    <script type="application/javascript">
        function createFamilyTree() {
            $("body").append(
                "<table><thead><th>Firstname</th><th>Lastname</th></thead><tbody></tbody></table>"
            );
        }
        function addNewMember(firstName, lastName, position) {
            let tr = `<tr><td>${firstName}</td><td>${lastName}</td><td>(x)</td></tr>`;
            if (position === "before") {
                $("tbody").prepend(tr);
                $("td:nth-child(3)").css("background-color", "orange");
                $("td:nth-child(3)").click(function () {
                    $(this).parent().remove();
                });
            } else {
                $("tbody")
                    .append(tr)
                    .find("td")
                    .last()
                    .css("background-color", "orange");
                $("td:nth-child(3)").click(function () {
                    $(this).parent().remove();
                });
            }
        }

        function createForm() {
            const select = $("<select></select>");
            const input = $("<input type='submit'>");
            select.append(
                "<option value='before'>Before</option>",
                "<option value='after'>After</option>"
            );

            input.click(function () {
                let name = $("input").first().val();
                let fname = $("input:nth-of-type(2)").val();
                let pos = select.val();
                addNewMember(name, fname, pos);
            });

            $("table").before(
                "<input type='text'>",
                "<input type='text'>",
                select,
                input
            );
        }

        createFamilyTree();
        createForm();
    </script>
</body>

</html>